# 后端服务器启动说明

## 问题：ERR_CONNECTION_REFUSED

这个错误表示前端无法连接到后端服务器，通常是因为后端服务器没有启动。

## 快速启动方法

### 方法1：使用启动脚本（推荐）
双击运行 `启动服务器.bat` 文件

### 方法2：使用命令行
```bash
cd travel-blog-backend
npm run dev
```

## 解决步骤

### 1. 确保 MongoDB 正在运行

后端需要 MongoDB 数据库。请确保 MongoDB 服务已启动：

**Windows:**
- 检查 MongoDB 服务是否运行：打开"服务"应用，查找 MongoDB 服务
- 或者使用命令：`net start MongoDB`（如果 MongoDB 作为 Windows 服务安装）

**手动启动 MongoDB:**
```bash
mongod --dbpath "你的数据目录路径"
```

### 2. 安装依赖（如果还没安装）

```bash
cd travel-blog-backend
npm install
```

### 3. 启动后端服务器

**开发模式（推荐，自动重启）：**
```bash
npm run dev
```

**生产模式：**
```bash
npm start
```

### 4. 验证服务器运行

服务器启动后，你应该看到：
```
MongoDB 连接成功
服务器运行在 http://localhost:3000
Travel Blog API 已启动
```

### 5. 测试 API

在浏览器中访问：http://localhost:3000

应该看到：`{"message":"Travel Blog API is running!"}`

## 环境变量配置（可选）

如果需要发送邮件验证码，创建 `.env` 文件：

```
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
PORT=3000
```

## 常见问题

1. **MongoDB 连接失败**
   - 确保 MongoDB 已安装并运行
   - 检查连接字符串：`mongodb://localhost:27017/travel-blog`

2. **端口被占用**
   - 修改 `.env` 文件中的 `PORT` 值
   - 或修改 `app.js` 中的默认端口

3. **依赖安装失败**
   - 确保 Node.js 版本 >= 14
   - 尝试删除 `node_modules` 和 `package-lock.json`，然后重新安装

