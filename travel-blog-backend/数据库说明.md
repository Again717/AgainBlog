# 📊 数据库说明

## ✅ 数据库已创建成功！

**数据库名称：** `travel-blog`  
**连接地址：** `mongodb://localhost:27017/travel-blog`

## 📋 数据库集合（Collections）

数据库已包含以下集合：

1. **users** - 用户集合
   - 存储用户信息（用户名、邮箱、密码、头像、简介等）
   - 索引：username（唯一）、email（唯一）

2. **posts** - 动态集合
   - 存储社区动态（内容、图片、点赞、评论、收藏等）
   - 关联用户（author）

3. **articles** - 文章集合
   - 存储博客文章（标题、内容、封面图、标签等）
   - 关联用户（author）

## 🚀 初始化数据库

如果需要重新初始化数据库，运行：

```bash
npm run init-db
```

这个命令会：
- ✅ 测试数据库连接
- ✅ 创建所有必要的索引
- ✅ 显示数据库统计信息
- ✅ 验证集合是否正确创建

## 📝 数据库操作

### 查看数据库（使用 MongoDB Compass 或命令行）

**MongoDB Compass:**
1. 打开 MongoDB Compass
2. 连接：`mongodb://localhost:27017`
3. 选择数据库：`travel-blog`

**命令行：**
```bash
mongosh
use travel-blog
show collections
db.users.find()
db.posts.find()
db.articles.find()
```

### 数据库统计

运行初始化脚本查看统计：
```bash
npm run init-db
```

## 🔧 数据库配置

数据库配置在 `app.js` 中：

```javascript
const MONGODB_URI = 'mongodb://localhost:27017/travel-blog';
```

可以通过环境变量修改：
```bash
# 创建 .env 文件
MONGODB_URI=mongodb://localhost:27017/travel-blog
PORT=3000
```

## 📊 数据模型

### User（用户）
- `username` - 用户名（唯一）
- `email` - 邮箱（唯一）
- `password` - 密码（加密）
- `avatar` - 头像URL
- `bio` - 个人简介
- `createdAt` - 创建时间
- `updatedAt` - 更新时间

### Post（动态）
- `author` - 作者（关联User）
- `content` - 动态内容
- `images` - 图片数组
- `likes` - 点赞用户数组
- `comments` - 评论数组
- `favorites` - 收藏用户数组
- `createdAt` - 创建时间
- `updatedAt` - 更新时间

### Article（文章）
- `title` - 标题
- `content` - 内容（Markdown）
- `htmlContent` - HTML内容
- `coverImage` - 封面图
- `author` - 作者（关联User）
- `tags` - 标签数组
- `viewCount` - 浏览量
- `createdAt` - 创建时间
- `updatedAt` - 更新时间

## ✅ 验证数据库

数据库已成功创建并初始化。现在可以：

1. ✅ 启动服务器：`npm run dev`
2. ✅ 注册用户（会自动创建用户数据）
3. ✅ 发布动态（会自动创建动态数据）
4. ✅ 发布文章（会自动创建文章数据）

## 🎉 完成！

数据库已准备就绪，可以开始使用应用程序了！














