# 📧 邮箱验证码配置说明

## ✅ 如何配置真实邮箱发送验证码

### 步骤 1：创建 .env 文件

在 `travel-blog-backend` 目录下创建 `.env` 文件：

```env
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
PORT=3000
```

### 步骤 2：获取 Gmail 应用密码

**重要：** 不能使用普通密码，必须使用"应用专用密码"

1. **登录 Google 账户**
   - 访问：https://myaccount.google.com/

2. **启用两步验证**
   - 如果未启用，需要先启用两步验证

3. **生成应用密码**
   - 访问：https://myaccount.google.com/apppasswords
   - 选择"邮件"和"其他（自定义名称）"
   - 输入名称：`Travel Blog`
   - 点击"生成"
   - 复制生成的16位密码（这就是 `EMAIL_PASS`）

### 步骤 3：配置其他邮箱服务商

如果不是 Gmail，可以使用其他 SMTP 服务：

**QQ邮箱：**
```env
EMAIL_USER=your-email@qq.com
EMAIL_PASS=your-auth-code
EMAIL_HOST=smtp.qq.com
EMAIL_PORT=587
```

**163邮箱：**
```env
EMAIL_USER=your-email@163.com
EMAIL_PASS=your-auth-code
EMAIL_HOST=smtp.163.com
EMAIL_PORT=465
```

**Outlook：**
```env
EMAIL_USER=your-email@outlook.com
EMAIL_PASS=your-password
EMAIL_HOST=smtp-mail.outlook.com
EMAIL_PORT=587
```

### 步骤 4：重启服务器

配置完成后，重启后端服务器：

```bash
npm run dev
```

### 步骤 5：验证配置

启动服务器后，应该看到：
```
邮件服务器配置成功，可以使用真实邮箱发送验证码
```

如果看到错误，检查：
1. `.env` 文件是否正确创建
2. 邮箱地址和密码是否正确
3. 是否使用了应用密码（Gmail）

## 🔍 故障排除

### 问题1：邮件发送失败

**错误信息：** `Invalid login` 或 `Authentication failed`

**解决方法：**
- 确保使用了应用密码，不是普通密码
- Gmail 必须启用两步验证
- 检查邮箱地址是否正确

### 问题2：邮件进入垃圾箱

**解决方法：**
- 检查发件人邮箱是否被标记为垃圾邮件
- 使用企业邮箱或专业邮箱服务
- 配置 SPF 和 DKIM 记录

### 问题3：邮件发送超时

**解决方法：**
- 检查网络连接
- 尝试使用其他 SMTP 端口（465 或 587）
- 检查防火墙设置

## 📝 测试模式

如果没有配置邮箱，系统会自动使用测试模式：
- 验证码会在后端控制台输出
- 前端会显示验证码（开发环境）
- 可以正常注册和登录

## ✅ 验证清单

- [ ] 创建了 `.env` 文件
- [ ] 配置了 `EMAIL_USER` 和 `EMAIL_PASS`
- [ ] 使用了应用密码（Gmail）
- [ ] 重启了服务器
- [ ] 看到"邮件服务器配置成功"消息
- [ ] 可以收到验证码邮件














